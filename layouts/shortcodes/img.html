{{ $height := .Get "height" }}
{{ $width := .Get "width" }}
{{ $alt := .Get "alt" }}
{{ $id := .Get "id" }}
{{ $taken_at := .Get "taken_at" }}

{{ $content := .Inner }}


{{/* Page Bundle Resource, needs special treatment */}}
{{ with .Page.Resources.GetMatch (.Get "src") }}
<figure id="img-{{ $id }}" class="gallery-fig"
    style="grid-row: auto / span {{ $height }}; grid-column: auto / span {{ $width }}">
    <img src="{{ . }}" alt="{{ $alt }}" onclick="openModal('{{ $id }}')" />
</figure>

<dialog class="gallery-modal" id="gallery-modal-{{ $id }}">
    <div class="gallery-modal-container">
        <div class="gallery-modal-header">
            <i class="fa-solid fa-x fa-xl" onclick="closeModal('{{ $id }}')">Close</i>
        </div>
        <div class="gallery-modal-content">
            <figure>
                <img src="{{ . }}" alt="{{ $alt }}" />
                <figcaption>shot at {{ $taken_at }}</figcaption>
            </figure>
            <section>{{ $content }}</section>
        </div>
    </div>
</dialog>
{{ else }}
<figure class="gallery-fig" style="grid-row: auto / span {{ $height }}; grid-column: auto / span {{ $width }}">
    <img src="{{ .Get "src" }}" alt="{{ .Get "alt" }}" />
</figure>
{{ end }}